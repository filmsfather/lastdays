(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4241],{6352:(e,s,t)=>{Promise.resolve().then(t.bind(t,7344))},7344:(e,s,t)=>{"use strict";t.d(s,{default:()=>c});var a=t(5155),r=t(2115),l=t(2663),i=t(2619),n=t.n(i);let d=e=>"상"===e?"text-green-600":"중상"===e?"text-blue-600":"중"===e?"text-yellow-600":"중하"===e?"text-orange-600":"하"===e?"text-red-600":"text-gray-600";function c(e){var s,t;let{sessionData:i,currentUser:c}=e,[o,x]=(0,r.useState)(i),[h,m]=(0,r.useState)(i.scores||{practical_skills:"",major_knowledge:"",major_suitability:"",attitude:""}),[p,g]=(0,r.useState)(""),[u,b]=(0,r.useState)(""),[j,y]=(0,r.useState)(""),[v,N]=(0,r.useState)(new Date);(0,r.useEffect)(()=>{let e=setInterval(()=>{N(new Date)},1e3);return()=>clearInterval(e)},[]);let w="teacher"===c.role,f="student"===c.role,k="admin"===c.role,_=(()=>{var e;let s=new Date(o.scheduling.scheduledStartAt),t=new Date(s.getTime()-6e4*o.scheduling.previewLeadMinutes),a=new Date(s.getTime()-3e5);return v>=new Date(s.getTime()+6e4*((null==(e=o.problemSnapshot)?void 0:e.limit_minutes)||60))?{status:"session_closed",canShow:!0}:v<t?{status:"before_preview",canShow:!1}:v>=t&&v<a?{status:"preview_open",canShow:!0}:v>=a&&v<s?{status:"waiting_room",canShow:!1}:{status:"interview_ready",canShow:!0}})(),S=async()=>{try{(await fetch("/api/sessions/".concat(o.sessionId,"/scores"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})).ok?(l.oR.success("점수가 저장되었습니다."),window.location.reload()):l.oR.error("점수 저장에 실패했습니다.")}catch(e){l.oR.error("오류가 발생했습니다.")}},R=async()=>{if(!p.trim())return void l.oR.error("피드백 내용을 입력해주세요.");try{(await fetch("/api/sessions/".concat(o.sessionId,"/feedback"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:p})})).ok?(l.oR.success("피드백이 저장되었습니다."),g(""),window.location.reload()):l.oR.error("피드백 저장에 실패했습니다.")}catch(e){l.oR.error("오류가 발생했습니다.")}},C=async()=>{try{(await fetch("/api/sessions/".concat(o.sessionId,"/reflection"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({reflectionText:u})})).ok?(l.oR.success("복기가 저장되었습니다."),x(e=>({...e,studentReflection:{text:u,updated_at:new Date().toISOString()}})),b("")):l.oR.error("복기 저장에 실패했습니다.")}catch(e){l.oR.error("오류가 발생했습니다.")}},T=async()=>{if(!j.trim())return void l.oR.error("체크리스트 항목을 입력해주세요.");try{(await fetch("/api/sessions/".concat(o.sessionId,"/checklist"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_text:j})})).ok?(l.oR.success("체크리스트 항목이 추가되었습니다."),y(""),window.location.reload()):l.oR.error("체크리스트 추가에 실패했습니다.")}catch(e){l.oR.error("오류가 발생했습니다.")}},D=async(e,s)=>{try{(await fetch("/api/sessions/".concat(o.sessionId,"/checklist/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_checked:!s})})).ok?(l.oR.success("체크리스트가 업데이트되었습니다."),window.location.reload()):l.oR.error("체크리스트 업데이트에 실패했습니다.")}catch(e){l.oR.error("오류가 발생했습니다.")}};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-100",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"학습 피드백"}),(0,a.jsxs)("p",{className:"text-gray-600",children:[new Date(o.slot.date).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"short"})," ","AM"===o.slot.session_period?"오전":"오후"," |",o.teacher.name," 선생님"]})]}),(0,a.jsx)(n(),{href:f?"/dashboard/student/history":w?"/dashboard/teacher":k?"/dashboard/admin":"/dashboard/student/history",className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"목록으로"})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"문제 정보"}),_.canShow?o.problemSnapshot?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-700 text-lg mb-2",children:"문제 제목"}),(0,a.jsx)("p",{className:"text-gray-900 text-lg",children:o.problemSnapshot.title})]}),(0,a.jsxs)("div",{className:"flex space-x-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-700 mb-1",children:"제한시간"}),(0,a.jsxs)("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded",children:[o.problemSnapshot.limit_minutes,"분"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-700 mb-1",children:"공개일"}),(0,a.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-sm rounded",children:o.problemSnapshot.available_date})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-700 text-lg mb-3",children:"문제 내용"}),(0,a.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg mt-2",children:[(0,a.jsx)("div",{className:"prose prose-lg max-w-none text-gray-800 leading-relaxed mb-4",children:(0,a.jsx)("pre",{className:"whitespace-pre-wrap text-base text-gray-800 leading-relaxed break-words",children:o.problemSnapshot.content})}),o.problemSnapshot.images&&o.problemSnapshot.images.length>0&&(0,a.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-700",children:"첨부 이미지"}),(0,a.jsx)("div",{className:"grid gap-4",children:o.problemSnapshot.images.map((e,s)=>(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("img",{src:e.url||e.src||e,alt:e.alt||"문제 이미지 ".concat(s+1),className:"max-w-full h-auto rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>window.open(e.url||e.src||e,"_blank"),style:{maxHeight:"600px",objectFit:"contain"}}),e.caption&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-2 text-center",children:e.caption})]},s))})]})]})]})]}):(0,a.jsx)("p",{className:"text-gray-500",children:"문제 정보가 없습니다."}):(()=>{var e;let s=new Date(o.scheduling.scheduledStartAt),t=new Date(s.getTime()-6e4*o.scheduling.previewLeadMinutes),r=new Date(s.getTime()+6e4*((null==(e=o.problemSnapshot)?void 0:e.limit_minutes)||60));return"session_closed"===_.status?(0,a.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 text-center",children:[(0,a.jsx)("div",{className:"text-gray-800 text-lg font-medium mb-2",children:"세션이 종료되었습니다"}),(0,a.jsx)("div",{className:"text-gray-600",children:"면접이 완료되어 피드백을 확인할 수 있습니다."}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 mt-2",children:["종료 시간: ",r.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1})]})]}):"before_preview"===_.status?(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[(0,a.jsx)("div",{className:"text-blue-800 text-lg font-medium mb-2",children:"문제 공개 대기 중"}),(0,a.jsxs)("div",{className:"text-blue-600",children:[t.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}),"에 문제가 오픈됩니다."]}),(0,a.jsxs)("div",{className:"text-sm text-blue-500 mt-2",children:["면접 예정 시간: ",s.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1})]})]}):"waiting_room"===_.status?(0,a.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-6 text-center",children:[(0,a.jsx)("div",{className:"text-orange-800 text-lg font-medium mb-2",children:"면접 5분 전입니다"}),(0,a.jsx)("div",{className:"text-orange-600",children:"면접실 앞에서 대기하세요."}),(0,a.jsxs)("div",{className:"text-sm text-orange-500 mt-2",children:["면접 시간: ",s.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1})]})]}):null})()]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"점수 및 평가"}),o.scores?(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"실기"}),(0,a.jsx)("p",{className:"text-lg font-semibold ".concat(d(o.scores.practical_skills)),children:o.scores.practical_skills})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"전공지식"}),(0,a.jsx)("p",{className:"text-lg font-semibold ".concat(d(o.scores.major_knowledge)),children:o.scores.major_knowledge})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"전공 적합성"}),(0,a.jsx)("p",{className:"text-lg font-semibold ".concat(d(o.scores.major_suitability)),children:o.scores.major_suitability})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"태도"}),(0,a.jsx)("p",{className:"text-lg font-semibold ".concat(d(o.scores.attitude)),children:o.scores.attitude})]})]})}):w?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"점수를 입력해주세요."}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"실기"}),(0,a.jsxs)("select",{value:h.practical_skills,onChange:e=>m({...h,practical_skills:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,a.jsx)("option",{value:"",children:"선택"}),(0,a.jsx)("option",{value:"상",children:"상"}),(0,a.jsx)("option",{value:"중상",children:"중상"}),(0,a.jsx)("option",{value:"중",children:"중"}),(0,a.jsx)("option",{value:"중하",children:"중하"}),(0,a.jsx)("option",{value:"하",children:"하"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"전공지식"}),(0,a.jsxs)("select",{value:h.major_knowledge,onChange:e=>m({...h,major_knowledge:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,a.jsx)("option",{value:"",children:"선택"}),(0,a.jsx)("option",{value:"상",children:"상"}),(0,a.jsx)("option",{value:"중상",children:"중상"}),(0,a.jsx)("option",{value:"중",children:"중"}),(0,a.jsx)("option",{value:"중하",children:"중하"}),(0,a.jsx)("option",{value:"하",children:"하"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"전공 적합성"}),(0,a.jsxs)("select",{value:h.major_suitability,onChange:e=>m({...h,major_suitability:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,a.jsx)("option",{value:"",children:"선택"}),(0,a.jsx)("option",{value:"상",children:"상"}),(0,a.jsx)("option",{value:"중상",children:"중상"}),(0,a.jsx)("option",{value:"중",children:"중"}),(0,a.jsx)("option",{value:"중하",children:"중하"}),(0,a.jsx)("option",{value:"하",children:"하"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"태도"}),(0,a.jsxs)("select",{value:h.attitude,onChange:e=>m({...h,attitude:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,a.jsx)("option",{value:"",children:"선택"}),(0,a.jsx)("option",{value:"상",children:"상"}),(0,a.jsx)("option",{value:"중상",children:"중상"}),(0,a.jsx)("option",{value:"중",children:"중"}),(0,a.jsx)("option",{value:"중하",children:"중하"}),(0,a.jsx)("option",{value:"하",children:"하"})]})]})]}),(0,a.jsx)("button",{onClick:S,className:"w-full mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"점수 저장"})]}):(0,a.jsx)("p",{className:"text-gray-500",children:"아직 점수가 등록되지 않았습니다."})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"교사 피드백"}),0===o.teacherFeedback.length?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"아직 피드백이 등록되지 않았습니다."}),w&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("textarea",{value:p,onChange:e=>g(e.target.value),placeholder:"피드백 내용을 입력해주세요...",className:"w-full px-3 py-2 border border-gray-300 rounded-md h-32 resize-none"}),(0,a.jsx)("button",{onClick:R,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"피드백 저장"})]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[o.teacherFeedback.map(e=>(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded",children:e.feedback_type}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString("ko-KR")})]}),(0,a.jsx)("p",{className:"text-gray-800 whitespace-pre-wrap",children:e.content})]},e.id)),w&&(0,a.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,a.jsx)("textarea",{value:p,onChange:e=>g(e.target.value),placeholder:"추가 피드백을 입력해주세요...",className:"w-full px-3 py-2 border border-gray-300 rounded-md h-32 resize-none"}),(0,a.jsx)("button",{onClick:R,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"피드백 추가"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"학습 체크리스트"}),0===o.checklistItems.length?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"체크리스트 항목이 없습니다."}),w&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("input",{type:"text",value:j,onChange:e=>y(e.target.value),placeholder:"체크리스트 항목을 입력해주세요...",className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),(0,a.jsx)("button",{onClick:T,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"항목 추가"})]})]}):(0,a.jsxs)("div",{className:"space-y-3",children:[o.checklistItems.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-5 h-5 rounded border-2 flex items-center justify-center ".concat(e.is_checked?"bg-green-500 border-green-500":"border-gray-300"),children:e.is_checked&&(0,a.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,a.jsx)("button",{onClick:()=>f&&D(e.id,e.is_checked),className:"flex-1 text-left ".concat(e.is_checked?"text-gray-500 line-through":"text-gray-900"," ").concat(f?"hover:bg-gray-50 p-2 rounded":""),disabled:!f,children:e.item_text})]},e.id)),w&&(0,a.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,a.jsx)("input",{type:"text",value:j,onChange:e=>y(e.target.value),placeholder:"추가 체크리스트 항목...",className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),(0,a.jsx)("button",{onClick:T,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"항목 추가"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 lg:col-span-2",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"학생 복기"}),f?(null==(s=o.studentReflection)?void 0:s.text)?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-gray-800 whitespace-pre-wrap",children:o.studentReflection.text}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["작성일: ",new Date(o.studentReflection.updated_at).toLocaleDateString("ko-KR")]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("textarea",{value:u,onChange:e=>b(e.target.value),placeholder:"복기를 수정하려면 여기에 새로운 내용을 작성해주세요...",className:"w-full px-3 py-2 border border-gray-300 rounded-md h-32 resize-none"}),(0,a.jsx)("button",{onClick:C,className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700",disabled:!u.trim(),children:"복기 수정"})]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("textarea",{value:u,onChange:e=>b(e.target.value),placeholder:"오늘 학습에 대한 복기를 작성해주세요...",className:"w-full px-3 py-2 border border-gray-300 rounded-md h-32 resize-none"}),(0,a.jsx)("button",{onClick:C,className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700",disabled:!u.trim(),children:"복기 저장"})]}):(null==(t=o.studentReflection)?void 0:t.text)?(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-gray-800 whitespace-pre-wrap",children:o.studentReflection.text}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["작성일: ",new Date(o.studentReflection.updated_at).toLocaleDateString("ko-KR")]})]}):(0,a.jsx)("p",{className:"text-gray-500",children:"아직 학생 복기가 작성되지 않았습니다."})]})]})]})})}}},e=>{e.O(0,[2619,2663,8441,1255,7358],()=>e(e.s=6352)),_N_E=e.O()}]);