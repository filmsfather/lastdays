(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4241],{63:(e,s,t)=>{"use strict";var a=t(7260);t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},2425:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var a=t(5155),r=t(2115),l=t(63),n=t(2663),i=t(2619),o=t.n(i);let d=e=>"상"===e?"text-green-600":"중상"===e?"text-blue-600":"중"===e?"text-yellow-600":"중하"===e?"text-orange-600":"하"===e?"text-red-600":"text-gray-600";function c(e){var s,t;let{sessionData:l,currentUser:i,isHallOfFameMode:c=!1}=e,[h,x]=(0,r.useState)(l),[m,u]=(0,r.useState)(l.scores||{practical_skills:"",major_knowledge:"",major_suitability:"",attitude:""}),[g,p]=(0,r.useState)(""),[b,j]=(0,r.useState)(""),[y,v]=(0,r.useState)(""),[N,w]=(0,r.useState)(new Date(new Date().toLocaleString("en-US",{timeZone:"Asia/Seoul"})));(0,r.useEffect)(()=>{let e=setInterval(()=>{w(new Date(new Date().toLocaleString("en-US",{timeZone:"Asia/Seoul"})))},1e3);return()=>clearInterval(e)},[]);let f="teacher"===i.role,k="student"===i.role,S="admin"===i.role,_=!c&&f,R=!c&&f,C=!c&&(f||k),D=!c&&k,L=(()=>{let e=new Date(h.scheduling.scheduledStartAt),s=new Date(e.getTime()-6e4*h.scheduling.previewLeadMinutes),t=new Date(e.getTime()-3e5);return N>=new Date(e.getTime()+6e5)?{status:"session_closed",canShow:!0}:N<s?{status:"before_preview",canShow:!1}:N>=s&&N<t?{status:"preview_open",canShow:!0}:N>=t&&N<e?{status:"waiting_room",canShow:!1}:{status:"interview_ready",canShow:!0}})(),T=async()=>{try{(await fetch("/api/sessions/".concat(h.sessionId,"/scores"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).ok?(n.oR.success("점수가 저장되었습니다."),window.location.reload()):n.oR.error("점수 저장에 실패했습니다.")}catch(e){n.oR.error("오류가 발생했습니다.")}},O=async()=>{if(!g.trim())return void n.oR.error("피드백 내용을 입력해주세요.");try{(await fetch("/api/sessions/".concat(h.sessionId,"/feedback"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:g})})).ok?(n.oR.success("피드백이 저장되었습니다."),p(""),window.location.reload()):n.oR.error("피드백 저장에 실패했습니다.")}catch(e){n.oR.error("오류가 발생했습니다.")}},I=async()=>{try{(await fetch("/api/sessions/".concat(h.sessionId,"/reflection"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({reflectionText:b})})).ok?(n.oR.success("복기가 저장되었습니다."),x(e=>({...e,studentReflection:{text:b,updated_at:new Date().toISOString()}})),j("")):n.oR.error("복기 저장에 실패했습니다.")}catch(e){n.oR.error("오류가 발생했습니다.")}},F=async()=>{if(!y.trim())return void n.oR.error("체크리스트 항목을 입력해주세요.");try{(await fetch("/api/sessions/".concat(h.sessionId,"/checklist"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_text:y})})).ok?(n.oR.success("체크리스트 항목이 추가되었습니다."),v(""),window.location.reload()):n.oR.error("체크리스트 추가에 실패했습니다.")}catch(e){n.oR.error("오류가 발생했습니다.")}},E=async(e,s)=>{try{(await fetch("/api/sessions/".concat(h.sessionId,"/checklist/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_checked:!s})})).ok?(n.oR.success("체크리스트가 업데이트되었습니다."),window.location.reload()):n.oR.error("체크리스트 업데이트에 실패했습니다.")}catch(e){n.oR.error("오류가 발생했습니다.")}};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-100",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[c&&(0,a.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center mr-3",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),"학습 피드백 ",c&&"\uD83C\uDFC6"]}),(0,a.jsxs)("p",{className:"text-gray-600",children:[new Date(h.slot.date).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"short"})," ","AM"===h.slot.session_period?"오전":"오후"," |",h.teacher.name," 선생님",c&&(0,a.jsx)("span",{className:"ml-3 px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"명예의 전당"})]})]}),(0,a.jsx)(o(),{href:c?"/hall-of-fame":k?"/dashboard/student/history":f?"/dashboard/teacher":S?"/dashboard/admin":"/dashboard/student/history",className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:c?"명예의 전당으로":"목록으로"})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"문제 정보"}),L.canShow?h.problemSnapshot?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-700 text-lg mb-2",children:"문제 제목"}),(0,a.jsx)("p",{className:"text-gray-900 text-lg",children:h.problemSnapshot.title})]}),(0,a.jsxs)("div",{className:"flex space-x-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-700 mb-1",children:"제한시간"}),(0,a.jsxs)("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded",children:[h.problemSnapshot.limit_minutes,"분"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-700 mb-1",children:"공개일"}),(0,a.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-sm rounded",children:h.problemSnapshot.available_date})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-700 text-lg mb-3",children:"문제 내용"}),(0,a.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg mt-2",children:[(0,a.jsx)("div",{className:"prose prose-lg max-w-none text-gray-800 leading-relaxed mb-4",children:(0,a.jsx)("pre",{className:"whitespace-pre-wrap text-base text-gray-800 leading-relaxed break-words",children:h.problemSnapshot.content})}),h.problemSnapshot.images&&h.problemSnapshot.images.length>0&&(0,a.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-700",children:"첨부 이미지"}),(0,a.jsx)("div",{className:"grid gap-4",children:h.problemSnapshot.images.map((e,s)=>(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("img",{src:e.url||e.src||e,alt:e.alt||"문제 이미지 ".concat(s+1),className:"max-w-full h-auto rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>window.open(e.url||e.src||e,"_blank"),style:{maxHeight:"600px",objectFit:"contain"}}),e.caption&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-2 text-center",children:e.caption})]},s))})]})]})]})]}):(0,a.jsx)("p",{className:"text-gray-500",children:"문제 정보가 없습니다."}):(()=>{let e=new Date(h.scheduling.scheduledStartAt),s=new Date(e.getTime()-6e4*h.scheduling.previewLeadMinutes),t=new Date(e.getTime()+6e5);return"session_closed"===L.status?(0,a.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 text-center",children:[(0,a.jsx)("div",{className:"text-gray-800 text-lg font-medium mb-2",children:"세션이 종료되었습니다"}),(0,a.jsx)("div",{className:"text-gray-600",children:"면접이 완료되어 피드백을 확인할 수 있습니다."}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 mt-2",children:["종료 시간: ",t.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1})]})]}):"before_preview"===L.status?(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[(0,a.jsx)("div",{className:"text-blue-800 text-lg font-medium mb-2",children:"문제 공개 대기 중"}),(0,a.jsxs)("div",{className:"text-blue-600",children:[s.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}),"에 문제가 오픈됩니다."]}),(0,a.jsxs)("div",{className:"text-sm text-blue-500 mt-2",children:["면접 예정 시간: ",e.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1})]})]}):"waiting_room"===L.status?(0,a.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-6 text-center",children:[(0,a.jsx)("div",{className:"text-orange-800 text-lg font-medium mb-2",children:"면접 5분 전입니다"}),(0,a.jsx)("div",{className:"text-orange-600",children:"면접실 앞에서 대기하세요."}),(0,a.jsxs)("div",{className:"text-sm text-orange-500 mt-2",children:["면접 시간: ",e.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1})]})]}):null})()]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"점수 및 평가"}),h.scores?(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"실기"}),(0,a.jsx)("p",{className:"text-lg font-semibold ".concat(d(h.scores.practical_skills)),children:h.scores.practical_skills})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"전공지식"}),(0,a.jsx)("p",{className:"text-lg font-semibold ".concat(d(h.scores.major_knowledge)),children:h.scores.major_knowledge})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"전공 적합성"}),(0,a.jsx)("p",{className:"text-lg font-semibold ".concat(d(h.scores.major_suitability)),children:h.scores.major_suitability})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"태도"}),(0,a.jsx)("p",{className:"text-lg font-semibold ".concat(d(h.scores.attitude)),children:h.scores.attitude})]})]})}):_?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"점수를 입력해주세요."}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"실기"}),(0,a.jsxs)("select",{value:m.practical_skills,onChange:e=>u({...m,practical_skills:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,a.jsx)("option",{value:"",children:"선택"}),(0,a.jsx)("option",{value:"상",children:"상"}),(0,a.jsx)("option",{value:"중상",children:"중상"}),(0,a.jsx)("option",{value:"중",children:"중"}),(0,a.jsx)("option",{value:"중하",children:"중하"}),(0,a.jsx)("option",{value:"하",children:"하"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"전공지식"}),(0,a.jsxs)("select",{value:m.major_knowledge,onChange:e=>u({...m,major_knowledge:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,a.jsx)("option",{value:"",children:"선택"}),(0,a.jsx)("option",{value:"상",children:"상"}),(0,a.jsx)("option",{value:"중상",children:"중상"}),(0,a.jsx)("option",{value:"중",children:"중"}),(0,a.jsx)("option",{value:"중하",children:"중하"}),(0,a.jsx)("option",{value:"하",children:"하"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"전공 적합성"}),(0,a.jsxs)("select",{value:m.major_suitability,onChange:e=>u({...m,major_suitability:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,a.jsx)("option",{value:"",children:"선택"}),(0,a.jsx)("option",{value:"상",children:"상"}),(0,a.jsx)("option",{value:"중상",children:"중상"}),(0,a.jsx)("option",{value:"중",children:"중"}),(0,a.jsx)("option",{value:"중하",children:"중하"}),(0,a.jsx)("option",{value:"하",children:"하"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"태도"}),(0,a.jsxs)("select",{value:m.attitude,onChange:e=>u({...m,attitude:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,a.jsx)("option",{value:"",children:"선택"}),(0,a.jsx)("option",{value:"상",children:"상"}),(0,a.jsx)("option",{value:"중상",children:"중상"}),(0,a.jsx)("option",{value:"중",children:"중"}),(0,a.jsx)("option",{value:"중하",children:"중하"}),(0,a.jsx)("option",{value:"하",children:"하"})]})]})]}),(0,a.jsx)("button",{onClick:T,className:"w-full mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"점수 저장"})]}):(0,a.jsx)("p",{className:"text-gray-500",children:"아직 점수가 등록되지 않았습니다."})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"교사 피드백"}),0===h.teacherFeedback.length?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"아직 피드백이 등록되지 않았습니다."}),R&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("textarea",{value:g,onChange:e=>p(e.target.value),placeholder:"피드백 내용을 입력해주세요...",className:"w-full px-3 py-2 border border-gray-300 rounded-md h-32 resize-none"}),(0,a.jsx)("button",{onClick:O,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"피드백 저장"})]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[h.teacherFeedback.map(e=>(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded",children:e.feedback_type}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString("ko-KR")})]}),(0,a.jsx)("p",{className:"text-gray-800 whitespace-pre-wrap",children:e.content})]},e.id)),R&&(0,a.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,a.jsx)("textarea",{value:g,onChange:e=>p(e.target.value),placeholder:"추가 피드백을 입력해주세요...",className:"w-full px-3 py-2 border border-gray-300 rounded-md h-32 resize-none"}),(0,a.jsx)("button",{onClick:O,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"피드백 추가"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"학습 체크리스트"}),0===h.checklistItems.length?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"체크리스트 항목이 없습니다."}),C&&f&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("input",{type:"text",value:y,onChange:e=>v(e.target.value),placeholder:"체크리스트 항목을 입력해주세요...",className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),(0,a.jsx)("button",{onClick:F,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"항목 추가"})]})]}):(0,a.jsxs)("div",{className:"space-y-3",children:[h.checklistItems.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-5 h-5 rounded border-2 flex items-center justify-center ".concat(e.is_checked?"bg-green-500 border-green-500":"border-gray-300"),children:e.is_checked&&(0,a.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,a.jsx)("button",{onClick:()=>C&&k&&E(e.id,e.is_checked),className:"flex-1 text-left ".concat(e.is_checked?"text-gray-500 line-through":"text-gray-900"," ").concat(C&&k?"hover:bg-gray-50 p-2 rounded":""),disabled:!C||!k,children:e.item_text})]},e.id)),C&&f&&(0,a.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,a.jsx)("input",{type:"text",value:y,onChange:e=>v(e.target.value),placeholder:"추가 체크리스트 항목...",className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),(0,a.jsx)("button",{onClick:F,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"항목 추가"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 lg:col-span-2",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"학생 복기"}),D?(null==(s=h.studentReflection)?void 0:s.text)?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-gray-800 whitespace-pre-wrap",children:h.studentReflection.text}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["작성일: ",new Date(h.studentReflection.updated_at).toLocaleDateString("ko-KR")]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("textarea",{value:b,onChange:e=>j(e.target.value),placeholder:"복기를 수정하려면 여기에 새로운 내용을 작성해주세요...",className:"w-full px-3 py-2 border border-gray-300 rounded-md h-32 resize-none"}),(0,a.jsx)("button",{onClick:I,className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700",disabled:!b.trim(),children:"복기 수정"})]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("textarea",{value:b,onChange:e=>j(e.target.value),placeholder:"오늘 학습에 대한 복기를 작성해주세요...",className:"w-full px-3 py-2 border border-gray-300 rounded-md h-32 resize-none"}),(0,a.jsx)("button",{onClick:I,className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700",disabled:!b.trim(),children:"복기 저장"})]}):(null==(t=h.studentReflection)?void 0:t.text)?(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-gray-800 whitespace-pre-wrap",children:h.studentReflection.text}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["작성일: ",new Date(h.studentReflection.updated_at).toLocaleDateString("ko-KR")]})]}):(0,a.jsx)("p",{className:"text-gray-500",children:"아직 학생 복기가 작성되지 않았습니다."})]})]})]})})}function h(e){let{params:s}=e;console.log("SessionFeedbackPage component mounted");let t=(0,l.useRouter)(),[n,i]=(0,r.useState)(null),[o,d]=(0,r.useState)(null),[h,x]=(0,r.useState)(!0),[m,u]=(0,r.useState)(null);if((0,r.useEffect)(()=>{console.log("Feedback page useEffect started"),async function(){try{console.log("Starting fetchData function"),x(!0),u(null);let e=await fetch("/api/auth/me");if(!e.ok)return void t.push("/login");let a=await e.json();if(!a.success||!a.user)return void t.push("/login");d({id:a.user.id,role:a.user.role});let r=await s,l=parseInt(r.id);if(isNaN(l))return void t.push("/dashboard/student");let n=new URLSearchParams(window.location.search),o="true"===n.get("hallOfFame"),c="/api/sessions/".concat(l,"/feedback-data").concat(o?"?hallOfFame=true":""),h=await fetch(c);if(!h.ok){if(401===h.status)return void t.push("/login");if(403===h.status)return void("teacher"===a.user.role?t.push("/dashboard/teacher/students"):t.push("/dashboard/student/history"));if(404===h.status)return void("teacher"===a.user.role?t.push("/dashboard/teacher/students"):t.push("/dashboard/student/history"));let e=await h.text();throw Error("세션 데이터 조회 실패: ".concat(e))}let m=await h.json();if(!m.success)throw Error(m.error||"세션 데이터 조회 실패");i(m.data)}catch(e){console.error("Feedback page error:",e),u(e instanceof Error?e.message:"알 수 없는 오류가 발생했습니다.")}finally{x(!1)}}()},[s,t]),h)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"세션 데이터를 불러오는 중..."})]})});if(m)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center max-w-md",children:[(0,a.jsx)("div",{className:"text-red-400 mb-4",children:(0,a.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"오류가 발생했습니다"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:m}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors mr-2",children:"다시 시도"}),(0,a.jsx)("button",{onClick:()=>{(null==o?void 0:o.role)==="teacher"?t.push("/dashboard/teacher/students"):t.push("/dashboard/student/history")},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:(null==o?void 0:o.role)==="teacher"?"학생 목록으로":"히스토리로 돌아가기"})]})});if(!n||!o)return null;let g="true"===new URLSearchParams(window.location.search).get("hallOfFame");return(0,a.jsx)(c,{sessionData:n,currentUser:o,isHallOfFameMode:g})}},6761:(e,s,t)=>{Promise.resolve().then(t.bind(t,2425))}},e=>{e.O(0,[2619,2663,8441,1255,7358],()=>e(e.s=6761)),_N_E=e.O()}]);