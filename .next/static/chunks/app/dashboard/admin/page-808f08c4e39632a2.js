(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1833],{63:(e,s,t)=>{"use strict";var a=t(7260);t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},2245:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(5155),l=t(2115),r=t(63);let n=function(e,s){return function(t){let{user:n,loading:i,error:d}=function(){let[e,s]=(0,l.useState)({user:null,loading:!0,error:null});return(0,l.useEffect)(()=>{!async function(){try{let e=await fetch("/api/auth/me",{method:"GET",credentials:"include"});if(e.ok){let t=await e.json();s({user:t.user,loading:!1,error:null})}else s({user:null,loading:!1,error:"인증되지 않았습니다."})}catch(e){s({user:null,loading:!1,error:"인증 확인 중 오류가 발생했습니다."})}}()},[]),e}(),c=(0,r.useRouter)();return((0,l.useEffect)(()=>{if(!i){if(!n)return void c.push((null==s?void 0:s.redirectTo)||"/login");if((null==s?void 0:s.roles)&&!s.roles.includes(n.role))return void c.push("/access-denied")}},[n,i,c]),i)?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"로딩 중..."})]})}):d||!n?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-red-600 mb-4",children:d||"인증이 필요합니다."}),(0,a.jsx)("button",{onClick:()=>c.push("/login"),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",children:"로그인하기"})]})}):(null==s?void 0:s.roles)&&!s.roles.includes(n.role)?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-red-600 mb-4",children:"접근 권한이 없습니다."}),(0,a.jsx)("button",{onClick:()=>c.push("/"),className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded",children:"홈으로 돌아가기"})]})}):(0,a.jsx)(e,{...t})}}(function(){let[e,s]=(0,l.useState)([]),[t,r]=(0,l.useState)(null),[n,i]=(0,l.useState)(!0),[d,c]=(0,l.useState)(null),[o,x]=(0,l.useState)(!1),[m,h]=(0,l.useState)(""),[u,g]=(0,l.useState)(1),[b,p]=(0,l.useState)(""),[j,y]=(0,l.useState)(!1),[N,f]=(0,l.useState)(!1),[v,w]=(0,l.useState)(!1),[k,S]=(0,l.useState)({name:"",className:"",role:"student",pin:""}),[C,D]=(0,l.useState)({date:"",teacherId:"",blocks:[]}),[_,E]=(0,l.useState)([]),[O,T]=(0,l.useState)(""),[M,P]=(0,l.useState)(new Date),[I,L]=(0,l.useState)([]),R=(0,l.useCallback)(async()=>{try{i(!0);let e=await fetch("/api/admin/accounts"),t=await e.json();if(!e.ok)throw Error(t.error||"계정 조회에 실패했습니다.");s(t.accounts),z(t.accounts)}catch(e){c(e instanceof Error?e.message:"오류가 발생했습니다.")}finally{i(!1)}},[]);(0,l.useEffect)(()=>{R()},[R]),(0,l.useEffect)(()=>{e.length>0&&L(e.filter(e=>"teacher"===e.role))},[e]);let z=e=>{let s=e.filter(e=>"student"===e.role),t=s.reduce((e,s)=>e+s.current_tickets,0),a=s.reduce((e,s)=>(e[s.class_name]||(e[s.class_name]={students:0,tickets:0}),e[s.class_name].students++,e[s.class_name].tickets+=s.current_tickets,e),{});r({totalStudents:s.length,totalTickets:t,averageTickets:s.length>0?Math.round(t/s.length*10)/10:0,classSummary:a})},B=async()=>{try{x(!0);let e=await fetch("/api/admin/tickets/weekly-issue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ticketCount:10})}),s=await e.json();if(!e.ok)throw Error(s.error||"주간 이용권 발급에 실패했습니다.");alert(s.message),R()}catch(e){alert(e instanceof Error?e.message:"오류가 발생했습니다.")}finally{x(!1)}},F=async()=>{if(!m||u<=0)return void alert("학생과 발급할 이용권 수량을 선택해주세요.");try{let e=await fetch("/api/admin/tickets/grant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:m,ticketCount:u,reason:b})}),s=await e.json();if(!e.ok)throw Error(s.error||"개별 이용권 발급에 실패했습니다.");alert(s.message),y(!1),h(""),g(1),p(""),R()}catch(e){alert(e instanceof Error?e.message:"오류가 발생했습니다.")}},J=async(e,s)=>{if(confirm("".concat(s," 계정을 정말 삭제하시겠습니까?")))try{let s=await fetch("/api/admin/accounts/".concat(e),{method:"DELETE"}),t=await s.json();if(!s.ok)throw Error(t.error||"계정 삭제에 실패했습니다.");alert(t.message),R()}catch(e){alert(e instanceof Error?e.message:"오류가 발생했습니다.")}},A=async()=>{if(!k.name||!k.className||!k.pin)return void alert("모든 필드를 입력해주세요.");if(4!==k.pin.length||!/^\d{4}$/.test(k.pin))return void alert("PIN은 4자리 숫자여야 합니다.");try{let e=await fetch("/api/admin/accounts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:k.name,className:k.className,role:k.role,pin:k.pin})}),s=await e.json();if(!e.ok)throw Error(s.error||"계정 생성에 실패했습니다.");alert("".concat(k.name," 계정이 생성되었습니다.")),f(!1),S({name:"",className:"",role:"student",pin:""}),R()}catch(e){alert(e instanceof Error?e.message:"오류가 발생했습니다.")}},W=e=>{let s=new Date(e),t=s.getDay(),a=s.getDate()-t+(0===t?-6:1);return new Date(s.setDate(a))},G=async e=>{try{let s=e.toISOString().split("T")[0],t=await fetch("/api/admin/weekly-schedule?weekStart=".concat(s)),a=await t.json();a.success?E(a.slots||[]):(console.error("Failed to fetch weekly schedule:",a.error),E([]))}catch(e){console.error("주간 스케줄 조회 실패:",e),E([])}};if(n)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"데이터를 불러오는 중..."})]})});if(d)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-red-600 mb-4",children:d}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"다시 시도"})]})});let H=e.filter(e=>"student"===e.role);return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:[(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"관리자 대시보드"}),(0,a.jsx)("p",{className:"text-gray-600",children:"계정 관리 및 이용권 현황"})]}),t&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"전체 학생"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-blue-600",children:[t.totalStudents,"명"]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"전체 이용권"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-green-600",children:[t.totalTickets,"장"]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"평균 이용권"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-yellow-600",children:[t.averageTickets,"장"]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"반 수"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-purple-600",children:[Object.keys(t.classSummary).length,"개"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"이용권 관리"}),(0,a.jsx)("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded",children:(0,a.jsx)("p",{className:"text-yellow-800 text-sm font-medium",children:"⚠️ 개인당 최대 10장까지만 보유 가능합니다."})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("button",{onClick:B,disabled:o,className:"w-full px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:o?"발급 중...":"주간 일괄 발급 (10장)"}),(0,a.jsx)("button",{onClick:()=>y(!0),className:"w-full px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"개별 발급"})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"시스템 관리"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("button",{onClick:()=>f(!0),className:"w-full px-6 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"새 계정 추가"}),(0,a.jsx)("button",{onClick:()=>window.open("/dashboard/admin/timeslot-management","_blank"),className:"w-full px-6 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"타임슬롯 관리 (새 창)"}),(0,a.jsx)("button",{onClick:()=>window.open("/hall-of-fame","_blank"),className:"w-full px-6 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700",children:"명예의 전당 \uD83C\uDFC6"}),(0,a.jsx)("button",{onClick:()=>{let e=W(new Date);P(e),T("current"),G(e)},className:"w-full px-6 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"주간 스케줄 보기"})]})]})]}),t&&Object.keys(t.classSummary).length>0&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"반별 현황"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(t.classSummary).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:s}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["학생: ",t.students,"명"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["이용권: ",t.tickets,"장"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["평균: ",Math.round(t.tickets/t.students*10)/10,"장"]})]},s)})})]}),O&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mb-8",children:[(0,a.jsxs)("div",{className:"p-6 border-b",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"주간 스케줄"}),(0,a.jsx)("button",{onClick:()=>T(""),className:"text-gray-500 hover:text-gray-700",children:"닫기"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("button",{onClick:()=>{let e=new Date(M);e.setDate(e.getDate()-7),P(e),G(e)},className:"flex items-center px-3 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"이전 주"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[M.getFullYear(),"년 ",M.getMonth()+1,"월 ",M.getDate(),"일 주간"]}),(0,a.jsx)("button",{onClick:()=>{let e=W(new Date);P(e),G(e)},className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors",children:"이번 주"})]}),(0,a.jsxs)("button",{onClick:()=>{let e=new Date(M);e.setDate(e.getDate()+7),P(e),G(e)},className:"flex items-center px-3 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:["다음 주",(0,a.jsx)("svg",{className:"w-5 h-5 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),(0,a.jsx)("div",{className:"p-6",children:0===_.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"이 주간에 등록된 타임슬롯이 없습니다."}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-4",children:["월","화","수","목","금","토","일"].map(e=>(0,a.jsx)("div",{className:"text-center p-2 text-sm font-medium text-gray-500 bg-gray-50 rounded-lg",children:e},e))}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-4",children:(e=>{let s=[];for(let t=0;t<7;t++){let a=new Date(e);a.setDate(e.getDate()+t),s.push(a)}return s})(M).map((e,s)=>{let t=e.toISOString().split("T")[0],l=_.filter(e=>e.date===t),r=e.toDateString()===new Date().toDateString(),n=e<new Date&&!r,i=l.reduce((e,s)=>{let t="".concat(s.teacher_name,"|").concat(s.teacher_class);return e[t]||(e[t]={teacherName:s.teacher_name,teacherClass:s.teacher_class,sessionPeriod:s.session_period,totalSlots:0,breakSlots:[],availableSlots:0,reservedSlots:0}),e[t].totalSlots++,s.is_available?s.current_reservations>0?e[t].reservedSlots++:e[t].availableSlots++:e[t].breakSlots.push(s.time_slot),e},{});return(0,a.jsxs)("div",{className:"min-h-64 p-4 border-2 rounded-xl ".concat(n?"bg-gray-50 opacity-60":"bg-white"," ").concat(r?"border-blue-400 bg-blue-50 shadow-lg":"border-gray-200 hover:border-gray-300"," transition-all duration-200"),children:[(0,a.jsxs)("div",{className:"text-base font-bold mb-3 text-center pb-2 border-b ".concat(r?"text-blue-800 border-blue-200":"text-gray-800 border-gray-200"),children:[e.getMonth()+1,"월 ",e.getDate(),"일",(0,a.jsxs)("div",{className:"text-xs font-normal text-gray-500 mt-1",children:[["일","월","화","수","목","금","토"][e.getDay()],"요일"]})]}),0===Object.keys(i).length?(0,a.jsxs)("div",{className:"text-center text-gray-400 py-6",children:[(0,a.jsx)("div",{className:"text-2xl mb-1",children:"\uD83D\uDCC5"}),(0,a.jsx)("div",{className:"text-sm",children:"수업 없음"})]}):(0,a.jsx)("div",{className:"space-y-2",children:Object.entries(i).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"border rounded-lg p-3 bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center flex-1 min-w-0 mr-2",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2 flex-shrink-0"}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"font-semibold text-blue-900 text-sm",children:t.teacherName}),(0,a.jsxs)("div",{className:"text-xs text-blue-700",children:["(",t.teacherClass,")"]})]})]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium flex-shrink-0 ".concat("AM"===t.sessionPeriod?"bg-orange-200 text-orange-800":"bg-purple-200 text-purple-800"),children:"AM"===t.sessionPeriod?"오전":"오후"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-xs text-gray-600 mb-2",children:[(0,a.jsxs)("span",{children:["총 ",t.totalSlots,"개 슬롯"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("span",{className:"text-green-600",children:["가능 ",t.availableSlots]}),(0,a.jsxs)("span",{className:"text-yellow-600",children:["예약 ",t.reservedSlots]})]})]}),t.breakSlots.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"쉬는시간:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:t.breakSlots.map((e,s)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-200 text-gray-700 rounded text-xs",children:e},s))})]})]},s)})})]},s)})}),(0,a.jsxs)("div",{className:"mt-6 bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"범례"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-green-200 border border-green-400 rounded mr-2"}),(0,a.jsx)("span",{children:"예약 가능"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-yellow-200 border border-yellow-400 rounded mr-2"}),(0,a.jsx)("span",{children:"일부 예약됨"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-red-200 border border-red-400 rounded mr-2"}),(0,a.jsx)("span",{children:"예약 마감"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-gray-300 border border-gray-400 rounded mr-2"}),(0,a.jsx)("span",{children:"쉬는시간"})]})]})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"전체 계정"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["총 ",e.length,"개 계정"]})]})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"이름"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"반"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"역할"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"잔여 이용권"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"생성일"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"관리"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.class_name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("admin"===e.role?"bg-red-100 text-red-800":"teacher"===e.role?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:"admin"===e.role?"관리자":"teacher"===e.role?"선생님":"학생"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"student"===e.role?(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"font-medium ".concat(e.current_tickets>=10?"text-red-600":"text-gray-900"),children:[e.current_tickets,"장"]}),(0,a.jsx)("span",{className:"text-gray-400 text-xs ml-1",children:"/10"}),e.current_tickets>=10&&(0,a.jsx)("div",{className:"text-xs text-red-500",children:"최대"})]}):"-"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString("ko-KR")}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"admin"!==e.role&&(0,a.jsx)("button",{onClick:()=>J(e.id,e.name),className:"text-red-600 hover:text-red-900",children:"삭제"})})]},e.id))})]})})]})]}),j&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"개별 이용권 발급"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"학생 선택"}),(0,a.jsxs)("select",{value:m,onChange:e=>h(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[(0,a.jsx)("option",{value:"",children:"학생을 선택하세요"}),H.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.class_name,")"]},e.id))]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"발급 수량"}),(0,a.jsx)("input",{type:"number",min:"1",value:u,onChange:e=>g(parseInt(e.target.value)||1),className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"발급 사유 (선택)"}),(0,a.jsx)("input",{type:"text",value:b,onChange:e=>p(e.target.value),placeholder:"예: 추가 과제 완료",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>y(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded hover:bg-gray-50",children:"취소"}),(0,a.jsx)("button",{onClick:F,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"발급"})]})]})}),N&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"새 계정 추가"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"이름"}),(0,a.jsx)("input",{type:"text",value:k.name,onChange:e=>S({...k,name:e.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"이름을 입력하세요"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"반"}),(0,a.jsx)("input",{type:"text",value:k.className,onChange:e=>S({...k,className:e.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"예: 3-1"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"역할"}),(0,a.jsxs)("select",{value:k.role,onChange:e=>S({...k,role:e.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[(0,a.jsx)("option",{value:"student",children:"학생"}),(0,a.jsx)("option",{value:"teacher",children:"선생님"}),(0,a.jsx)("option",{value:"admin",children:"관리자"})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PIN 코드 (4자리)"}),(0,a.jsx)("input",{type:"password",maxLength:4,value:k.pin,onChange:e=>S({...k,pin:e.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"4자리 숫자"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>f(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded hover:bg-gray-50",children:"취소"}),(0,a.jsx)("button",{onClick:A,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"추가"})]})]})}),v&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"타임슬롯 관리"}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-blue-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"새로운 타임슬롯 관리 시스템"}),(0,a.jsx)("p",{className:"text-sm text-blue-700 mb-3",children:"이제 10분 단위로 정밀한 타임슬롯을 생성하고 관리할 수 있습니다."}),(0,a.jsxs)("ul",{className:"text-xs text-blue-700 space-y-1",children:[(0,a.jsx)("li",{children:"• 10분 간격으로 세밀한 시간 설정"}),(0,a.jsx)("li",{children:"• 쉬는시간 블록 설정 가능"}),(0,a.jsx)("li",{children:"• 개별 슬롯 삭제 및 관리"}),(0,a.jsx)("li",{children:"• 실시간 예약 현황 확인"})]})]})]})})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>w(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded hover:bg-gray-50",children:"닫기"}),(0,a.jsx)("button",{onClick:()=>{w(!1),window.open("/dashboard/admin/timeslot-management","_blank")},className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"타임슬롯 관리 열기"})]})]})})]})},{roles:["admin"]})},6321:(e,s,t)=>{Promise.resolve().then(t.bind(t,2245))}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=6321)),_N_E=e.O()}]);