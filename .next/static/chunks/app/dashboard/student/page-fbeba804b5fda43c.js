(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7949],{63:(e,s,t)=>{"use strict";var r=t(7260);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})},1492:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(5155),l=t(2115),a=t(2663),n=t(2619),o=t.n(n),i=t(63);function d(){let e=(0,i.useRouter)(),[s,t]=(0,l.useState)(null),[n,d]=(0,l.useState)(0),[c,x]=(0,l.useState)([]),[m,h]=(0,l.useState)([]),[u,b]=(0,l.useState)([]),[g,j]=(0,l.useState)([]),[p,f]=(0,l.useState)(!0),[v,y]=(0,l.useState)(null),[N,w]=(0,l.useState)(new Date),[k,C]=(0,l.useState)(null),[L,D]=(0,l.useState)(!1),[S,M]=(0,l.useState)(null),[_,I]=(0,l.useState)(!1),[P,R]=(0,l.useState)(""),[V,B]=(0,l.useState)(""),[W,z]=(0,l.useState)(!1),[E,T]=(0,l.useState)(!1),[O,F]=(0,l.useState)(null);(0,l.useEffect)(()=>{!async function(){try{let e=await fetch("/api/auth/me"),s=await e.json();if(s.success){if(t(s.user),"student"!==s.user.role){a.oR.error("학생만 접근 가능한 페이지입니다."),window.location.href="/login";}}else{window.location.href="/login";}}catch(e){console.error("사용자 정보 조회 실패:",e),window.location.href="/login"}}()},[]);let H=e=>{let[s,t,r]=X(e).split("-").map(Number),l=new Date(s,t-1,r),a=l.getDay(),n=l.getDate()-a+(0===a?-6:1),o=new Date(l);return o.setDate(n),o},A=e=>{let s=[];for(let t=0;t<7;t++){let r=new Date(e);r.setDate(e.getDate()+t),s.push(r)}return s},J=e=>{let s=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(s,"-").concat(t,"-").concat(r)};(0,l.useEffect)(()=>{s&&w(H(new Date))},[s]),(0,l.useEffect)(()=>{s&&N&&e();async function e(){f(!0);try{await Promise.all([Y(),K(),Z(),$(),q()])}catch(e){console.error("데이터 로드 실패:",e),a.oR.error("데이터를 불러오는 중 오류가 발생했습니다.")}finally{f(!1)}}},[s,N]);let Y=async()=>{try{let e=await fetch("/api/me/tickets"),s=await e.json();s.success&&d(s.remaining_tickets)}catch(e){console.error("이용권 조회 실패:",e)}},K=async()=>{try{let e=new Date(N);e.setDate(e.getDate()+6);let s=N.toISOString().split("T")[0],t=e.toISOString().split("T")[0],r=await fetch("/api/slots?from=".concat(s,"&to=").concat(t)),l=await r.json();l.success&&x(l.slots)}catch(e){console.error("슬롯 조회 실패:",e)}},Z=async()=>{try{let e=await fetch("/api/reservations"),s=await e.json();s.success&&h(s.reservations)}catch(e){console.error("예약 조회 실패:",e)}},$=async e=>{try{let s=await fetch(e?"/api/student/problems?date=".concat(e):"/api/student/problems"),t=await s.json();t.success&&b(t.problems)}catch(e){console.error("문제 조회 실패:",e)}},q=async()=>{try{console.log("Fetching sessions...");let s=await fetch("/api/student/sessions"),t=await s.json();if(console.log("Sessions response:",t),t.success){var e;j(t.sessions||[]),console.log("Sessions loaded:",(null==(e=t.sessions)?void 0:e.length)||0)}else console.error("Sessions fetch failed:",t.error)}catch(e){console.error("세션 조회 실패:",e)}},G=async()=>{if(!v||n<=0)return void a.oR.error("슬롯을 선택하고 이용권을 확인해주세요.");try{let e=await fetch("/api/reservations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slotId:v})}),s=await e.json();s.success?(a.oR.success("예약이 생성되었습니다."),y(null),await Promise.all([Y(),K(),Z()])):a.oR.error(s.error||"예약 생성에 실패했습니다.")}catch(e){console.error("예약 생성 실패:",e),a.oR.error("예약 생성 중 오류가 발생했습니다.")}},Q=async e=>{if(confirm("예약을 취소하시겠습니까?"))try{let s=await fetch("/api/reservations/".concat(e),{method:"DELETE"}),t=await s.json();t.success?(a.oR.success("예약이 취소되고 이용권이 환불되었습니다."),await Promise.all([Y(),K(),Z()])):a.oR.error(t.error||"예약 취소에 실패했습니다.")}catch(e){console.error("예약 취소 실패:",e),a.oR.error("예약 취소 중 오류가 발생했습니다.")}},U=async()=>{if(!k||!S)return void a.oR.error("문제를 선택해주세요.");try{console.log("문제 선택 요청:",{currentReservationId:S,selectedProblem:k});let r=await fetch("/api/reservations/".concat(S,"/select-problem"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({problemId:k})});if(console.log("API 응답 상태:",r.status,r.statusText),console.log("API 응답 헤더:",Object.fromEntries(r.headers.entries())),!r.ok){if(console.error("API 에러 응답:",r.status,r.statusText),405===r.status)return void a.oR.error("API 경로 오류가 발생했습니다. 개발자에게 문의하세요.");let e=await r.text();console.error("에러 응답 내용:",e);try{let s=JSON.parse(e);a.oR.error(s.error||"문제 선택에 실패했습니다.")}catch(s){a.oR.error("서버 오류 (".concat(r.status,"): ").concat(e||"알 수 없는 오류"))}return}let l=await r.json();if(console.log("API 응답 데이터:",l),l.success){var s,t;if(a.oR.success("문제가 선택되고 세션이 생성되었습니다."),D(!1),C(null),M(null),await Promise.all([Z(),q()]),(null==(s=l.session)?void 0:s.id)||l.sessionId){let s=(null==(t=l.session)?void 0:t.id)||l.sessionId;console.log("피드백 페이지로 이동:",s),e.push("/session/".concat(s,"/feedback"))}}else a.oR.error(l.error||"문제 선택에 실패했습니다.")}catch(e){console.error("문제 선택 실패 (Catch):",e),a.oR.error("문제 선택 중 오류가 발생했습니다: ".concat(e instanceof Error?e.message:"알 수 없는 오류"))}},X=e=>{let s=e||new Date;return new Intl.DateTimeFormat("fr-CA",{timeZone:"Asia/Seoul"}).format(s)},ee=e=>{let s=X();return e.slot.date>=s},es=async()=>{if(!P||!V)return void a.oR.error("현재 PIN과 새 PIN을 모두 입력해주세요.");if(4!==V.length||!/^\d{4}$/.test(V))return void a.oR.error("새 PIN은 4자리 숫자여야 합니다.");z(!0);try{let e=await fetch("/api/change-pin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPin:P,newPin:V})}),s=await e.json();s.success?(a.oR.success("PIN이 성공적으로 변경되었습니다."),I(!1),R(""),B("")):a.oR.error(s.error||"PIN 변경에 실패했습니다.")}catch(e){console.error("PIN 변경 실패:",e),a.oR.error("PIN 변경 중 오류가 발생했습니다.")}finally{z(!1)}},et=e=>new Date(e).toLocaleDateString("ko-KR",{month:"long",day:"numeric",weekday:"short"}),er=e=>e.substring(0,5),el=e=>"AM"===e?"오전":"오후",ea=()=>{let e=new Date(N);e.setDate(e.getDate()-7),w(e)},en=()=>{let e=new Date(N);e.setDate(e.getDate()+7),w(e)},eo=()=>{w(H(new Date))},ei=e=>{w(H(e)),T(!1)},ed=e=>{let s=J(e);return c.filter(e=>e.date===s&&e.available)},ec=e=>{let s=e.getMonth()+1,t=e.getDate(),r=["일","월","화","수","목","금","토"][e.getDay()];return"".concat(s,"/").concat(t," (").concat(r,")")};return p?(0,r.jsx)("div",{className:"min-h-screen gradient-bg flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center animate-fade-in",children:[(0,r.jsx)("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600 font-medium",children:"데이터를 불러오는 중..."})]})}):(0,r.jsxs)("div",{className:"min-h-screen gradient-bg",children:[(0,r.jsx)("nav",{className:"bg-white/80 backdrop-blur-sm border-b border-white/20 sticky top-0 z-40",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 lg:px-6 py-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-xl flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold text-sm",children:"L"})}),(0,r.jsxs)("div",{className:"hidden sm:block",children:[(0,r.jsx)("span",{className:"text-lg font-bold text-gray-900",children:"Last Days"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"학생 대시보드"})]}),(0,r.jsx)("div",{className:"sm:hidden",children:(0,r.jsx)("span",{className:"text-base font-bold text-gray-900",children:"Last Days"})})]}),(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[(0,r.jsx)(o(),{href:"/dashboard/student/history",className:"btn-ghost",children:"학습 히스토리"}),(0,r.jsx)("button",{onClick:()=>I(!0),className:"btn-ghost",children:"PIN 변경"}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 px-4 py-2 bg-blue-50 rounded-xl border border-blue-100",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"text-blue-600 font-medium",children:"보유 이용권"}),(0,r.jsx)("span",{className:"ml-2 text-2xl font-bold text-blue-700",children:n}),(0,r.jsx)("span",{className:"text-blue-600 text-sm",children:"장"})]})]})]}),(0,r.jsxs)("div",{className:"md:hidden flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"flex items-center px-3 py-1 bg-blue-50 rounded-lg border border-blue-100",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse mr-2"}),(0,r.jsx)("span",{className:"text-blue-700 font-bold text-lg",children:n}),(0,r.jsx)("span",{className:"text-blue-600 text-xs ml-1",children:"장"})]}),(0,r.jsx)(o(),{href:"/dashboard/student/history",className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",title:"학습 히스토리",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsx)(o(),{href:"/hall-of-fame",className:"p-2 text-gray-600 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg transition-colors",title:"명예의 전당",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),(0,r.jsx)("button",{onClick:()=>I(!0),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m0 0a2 2 0 012 2m-2-2a2 2 0 00-2 2m2 2v2a2 2 0 01-2 2m-2-2a2 2 0 01-2-2m2-2a2 2 0 012-2m0 0V5a2 2 0 00-2-2m-4 6V4a1 1 0 011-1h4a1 1 0 011 1v2m-6 0a1 1 0 00-1 1v4a1 1 0 001 1m-1-5h2m5 0h2"})})})]})]})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 lg:px-6 py-6 lg:py-8",children:[(0,r.jsxs)("div",{className:"mb-6 lg:mb-8 animate-fade-in",children:[(0,r.jsxs)("h1",{className:"text-2xl lg:text-4xl font-bold text-gray-900 mb-2",children:["안녕하세요, ",(0,r.jsx)("span",{className:"bg-gradient-to-r from-blue-600 to-blue-600 bg-clip-text text-transparent",children:null==s?void 0:s.name}),"님!"]}),(0,r.jsxs)("p",{className:"text-base lg:text-xl text-gray-600",children:[(0,r.jsx)("span",{className:"block lg:inline",children:null==s?void 0:s.className}),(0,r.jsx)("span",{className:"hidden lg:inline",children:" • "}),(0,r.jsx)("span",{className:"block lg:inline text-sm lg:text-xl",children:"체계적인 학습으로 목표를 달성해보세요"})]})]}),(0,r.jsx)("div",{className:"card animate-slide-up mb-6",children:(0,r.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-amber-50 border border-yellow-200 rounded-2xl p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center mr-4",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-yellow-800 flex items-center",children:"명예의 전당 \uD83C\uDFC6"}),(0,r.jsx)("p",{className:"text-yellow-600 text-sm",children:"우수한 성과를 거둔 학습 세션들을 확인해보세요"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83E\uDD47"}),(0,r.jsx)("span",{className:"text-xl",children:"✨"})]})]}),(0,r.jsxs)(o(),{href:"/hall-of-fame",className:"inline-flex items-center justify-center w-full py-3 px-4 bg-gradient-to-r from-yellow-500 to-amber-500 text-white font-semibold rounded-xl hover:from-yellow-600 hover:to-amber-600 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),"명예의 전당 둘러보기",(0,r.jsx)("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]})}),(0,r.jsxs)("div",{className:"card animate-slide-up",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"예약 캘린더"}),(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),(0,r.jsxs)("div",{className:"mb-6 lg:mb-8 p-3 lg:p-4 bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl border border-gray-200",children:[(0,r.jsxs)("div",{className:"hidden lg:flex items-center justify-between",children:[(0,r.jsxs)("button",{onClick:ea,className:"flex items-center px-4 py-2 text-gray-600 hover:text-gray-900 hover:bg-white rounded-lg transition-all shadow-sm hover:shadow-md",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"이전 주"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900",children:[N.getFullYear(),"년 ",N.getMonth()+1,"월 ",N.getDate(),"일 주간"]}),(0,r.jsx)("button",{onClick:eo,className:"px-4 py-2 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors shadow-sm",children:"이번 주"})]}),(0,r.jsxs)("button",{onClick:en,className:"flex items-center px-4 py-2 text-gray-600 hover:text-gray-900 hover:bg-white rounded-lg transition-all shadow-sm hover:shadow-md",children:["다음 주",(0,r.jsx)("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),(0,r.jsxs)("div",{className:"lg:hidden",children:[(0,r.jsxs)("div",{className:"text-center mb-3",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:[N.getFullYear(),"년 ",N.getMonth()+1,"월 ",N.getDate(),"일 주간"]}),(0,r.jsx)("button",{onClick:eo,className:"px-3 py-1 text-xs bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors shadow-sm",children:"이번 주로"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("button",{onClick:ea,className:"flex items-center px-3 py-2 text-gray-600 hover:text-gray-900 hover:bg-white rounded-lg transition-all shadow-sm",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"이전 주"]}),(0,r.jsxs)("button",{onClick:en,className:"flex items-center px-3 py-2 text-gray-600 hover:text-gray-900 hover:bg-white rounded-lg transition-all shadow-sm",children:["다음 주",(0,r.jsx)("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]}),m.filter(ee).length>0&&(0,r.jsxs)("div",{className:"mb-6 lg:mb-8 p-4 lg:p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl border border-blue-200",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center mr-3",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),"내 예약 현황 (",m.filter(ee).length,"개)"]}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 lg:gap-4",children:m.filter(ee).map(e=>{let s=e.slot.date===X();return(0,r.jsxs)("div",{className:"p-4 rounded-xl border-2 transition-all duration-200 ".concat("completed"===e.status?"bg-green-50 border-green-200":e.problem_selected?"bg-blue-50 border-blue-200":s?"bg-amber-50 border-amber-200":"bg-white border-gray-200"),children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-semibold text-gray-800 text-sm",children:[et(e.slot.date),s&&(0,r.jsx)("span",{className:"ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full",children:"오늘"})]}),(0,r.jsxs)("p",{className:"text-gray-600 text-sm",children:[el(e.slot.session_period)," ",er(e.slot.time_slot)]}),(0,r.jsxs)("p",{className:"text-gray-500 text-xs",children:[e.slot.teacher.name," 선생님"]})]}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-lg text-xs font-medium ".concat("completed"===e.status?"bg-green-100 text-green-800":e.problem_selected?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:"completed"===e.status?"완료":e.problem_selected?"문제선택완료":"예약됨"})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[s&&!e.problem_selected&&(0,r.jsx)("button",{onClick:async()=>{M(e.id),await $(e.slot.date),D(!0)},className:"flex-1 btn-primary text-xs py-2",children:"문제 선택"}),"active"===e.status&&(0,r.jsx)("button",{onClick:()=>Q(e.id),className:"flex-1 px-3 py-2 bg-red-500 text-white text-xs rounded-lg font-medium hover:bg-red-600 transition-colors",children:"취소"})]})]},e.id)})})]}),(0,r.jsxs)("div",{className:"hidden lg:block",children:[(0,r.jsx)("div",{className:"grid grid-cols-7 gap-2 mb-6",children:["월요일","화요일","수요일","목요일","금요일","토요일","일요일"].map((e,s)=>(0,r.jsx)("div",{className:"text-center p-4 text-lg font-bold text-gray-700 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl border border-gray-200",children:e},e))}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-2 max-h-[600px] overflow-y-auto custom-scrollbar",children:A(N).map((e,s)=>{let t=ed(e),l=J(e),a=m.filter(e=>e.slot.date===l),n=X(),o=l===n,i=l<n;return(0,r.jsxs)("div",{className:"min-h-48 p-4 border-2 rounded-2xl transition-all duration-200 ".concat(i?"bg-gray-50 opacity-60":"bg-white hover:shadow-md"," ").concat(o?"border-blue-400 bg-blue-50 shadow-lg":"border-gray-200"),children:[(0,r.jsxs)("div",{className:"text-lg font-bold mb-4 text-center pb-2 border-b ".concat(o?"text-blue-700 border-blue-200":"text-gray-700 border-gray-200"),children:[ec(e),o&&(0,r.jsx)("div",{className:"text-xs text-blue-600 font-normal",children:"오늘"})]}),a.map(e=>(0,r.jsxs)("div",{className:"mb-3 p-3 rounded-xl border-2 ".concat("completed"===e.status?"bg-green-100 border-green-300":e.problem_selected?"bg-blue-100 border-blue-300":"bg-amber-100 border-amber-300"),children:[(0,r.jsx)("div",{className:"text-sm font-semibold text-gray-800",children:"내 예약 \uD83D\uDCC5"}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[el(e.slot.session_period)," ",er(e.slot.time_slot)]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[e.slot.teacher.name," 선생님"]})]},"reservation-".concat(e.id))),0===t.length&&0===a.length?(0,r.jsxs)("div",{className:"text-center mt-8",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-2",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,r.jsx)("div",{className:"text-sm text-gray-400",children:i?"지난 날":"예약 없음"})]}):(0,r.jsx)("div",{className:"space-y-1",children:t.map(e=>(0,r.jsx)("div",{className:"p-2 rounded-lg cursor-pointer transition-all duration-200 border ".concat(v===e.id?"bg-green-100 border-green-400 shadow-sm":"bg-gray-50 hover:bg-gray-100 border-gray-200 hover:border-gray-300"," ").concat(i?"cursor-not-allowed opacity-50":""),onClick:()=>!i&&y(e.id),children:(0,r.jsxs)("div",{className:"font-medium text-gray-800 text-sm text-center",children:[el(e.session_period)," ",er(e.time_slot)]})},e.id))})]},s)})})]}),(0,r.jsxs)("div",{className:"lg:hidden",children:[(0,r.jsxs)("div",{className:"mb-4 p-4 bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl border border-gray-200",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"요일별 보기"}),(0,r.jsxs)("select",{value:null!=O?O:"",onChange:e=>F(""===e.target.value?null:parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white text-gray-700 font-medium",children:[(0,r.jsx)("option",{value:"",children:"전체 요일 보기"}),(0,r.jsx)("option",{value:"1",children:"월요일"}),(0,r.jsx)("option",{value:"2",children:"화요일"}),(0,r.jsx)("option",{value:"3",children:"수요일"}),(0,r.jsx)("option",{value:"4",children:"목요일"}),(0,r.jsx)("option",{value:"5",children:"금요일"}),(0,r.jsx)("option",{value:"6",children:"토요일"}),(0,r.jsx)("option",{value:"0",children:"일요일"})]})]}),(0,r.jsx)("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:A(N).map((e,s)=>{let t=ed(e),l=J(e),a=m.filter(e=>e.slot.date===l),n=X(),o=l===n,i=l<n;return null!==O&&e.getDay()!==O||0===t.length&&0===a.length?null:(0,r.jsxs)("div",{className:"border-2 rounded-2xl transition-all duration-200 ".concat(i?"bg-gray-50 opacity-70":"bg-white"," ").concat(o?"border-blue-400 bg-blue-50 shadow-lg":"border-gray-200"),children:[(0,r.jsx)("div",{className:"p-4 border-b ".concat(o?"bg-blue-100 border-blue-200":"bg-gray-50 border-gray-200"," rounded-t-2xl"),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold ".concat(o?"text-blue-700":"text-gray-700"),children:ec(e)}),o&&(0,r.jsx)("span",{className:"inline-block mt-1 px-2 py-1 bg-blue-200 text-blue-800 text-xs rounded-full font-medium",children:"오늘"})]}),(0,r.jsx)("button",{onClick:()=>T(!0),className:"w-12 h-12 rounded-xl flex items-center justify-center transition-colors hover:scale-105 ".concat(o?"bg-blue-200 hover:bg-blue-300":"bg-gray-100 hover:bg-gray-200"),children:(0,r.jsx)("svg",{className:"w-6 h-6 ".concat(o?"text-blue-600":"text-gray-400"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 002 2z"})})})]})}),(0,r.jsxs)("div",{className:"p-4 space-y-3",children:[a.map(e=>(0,r.jsxs)("div",{className:"p-4 rounded-xl border-2 ".concat("completed"===e.status?"bg-green-50 border-green-200":e.problem_selected?"bg-blue-50 border-blue-200":"bg-amber-50 border-amber-200"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center mr-3",children:(0,r.jsx)("span",{className:"text-white text-sm font-bold",children:"예약"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-semibold text-gray-800 text-base",children:[el(e.slot.session_period)," ",er(e.slot.time_slot)]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[e.slot.teacher.name," 선생님"]})]})]}),(0,r.jsx)("span",{className:"px-3 py-1 rounded-lg text-sm font-medium ".concat("completed"===e.status?"bg-green-100 text-green-800":e.problem_selected?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:"completed"===e.status?"완료":e.problem_selected?"문제선택완료":"예약됨"})]}),o&&!e.problem_selected&&(0,r.jsx)("button",{onClick:async()=>{M(e.id),await $(e.slot.date),D(!0)},className:"w-full mt-3 py-3 bg-blue-600 text-white rounded-xl font-semibold hover:bg-blue-700 transition-colors",children:"문제 선택하기 ✨"}),"active"===e.status&&(0,r.jsx)("button",{onClick:()=>Q(e.id),className:"w-full mt-3 py-3 bg-red-500 text-white rounded-xl font-semibold hover:bg-red-600 transition-colors",children:"예약 취소"})]},"mobile-reservation-".concat(e.id))),t.length>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("h4",{className:"text-base font-semibold text-gray-700 mb-3",children:["예약 가능한 시간 (",t.length,"개)"]}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:t.map(e=>(0,r.jsx)("button",{className:"p-4 rounded-xl font-semibold transition-all duration-200 border-2 ".concat(v===e.id?"bg-green-100 border-green-400 text-green-800 shadow-md scale-105":"bg-white border-gray-200 text-gray-700 hover:border-blue-300 hover:bg-blue-50"," ").concat(i?"cursor-not-allowed opacity-50":"active:scale-95"),onClick:()=>!i&&y(e.id),disabled:i,children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-base font-bold",children:el(e.session_period)}),(0,r.jsx)("div",{className:"text-lg font-bold mt-1",children:er(e.time_slot)}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.teacher_name," 선생님"]})]})},e.id))})]})]})]},s)})})]}),(0,r.jsx)("div",{className:"mt-8 pt-6 border-t-2 border-gray-200",children:(0,r.jsx)("button",{onClick:G,disabled:!v||n<=0,className:"w-full py-6 px-8 rounded-2xl font-bold text-xl transition-all duration-300 ".concat(v&&n>0?"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-xl hover:shadow-2xl transform hover:-translate-y-2 hover:scale-105":"bg-gray-200 text-gray-500 cursor-not-allowed"),children:n<=0?"이용권이 없습니다 \uD83D\uDE14":v?"선택한 시간으로 예약하기 ✨":"시간을 선택해주세요 \uD83D\uDCC5"})})]}),(0,r.jsxs)("div",{className:"card animate-slide-up",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"피드백 세션"}),(0,r.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]}),0===g.filter(e=>"completed"!==e.status).length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"생성된 피드백 세션이 없습니다"}),(0,r.jsx)("p",{className:"text-gray-500",children:"문제를 선택하면 피드백 세션이 생성됩니다"})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.filter(e=>"completed"!==e.status).map(s=>(0,r.jsxs)("div",{className:"p-4 lg:p-5 rounded-2xl border-2 transition-all duration-200 hover:shadow-lg ".concat("completed"===s.status?"bg-green-50 border-green-200":"feedback_pending"===s.status?"bg-blue-50 border-blue-200":"bg-amber-50 border-amber-200"),children:[(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start mb-3",children:[(0,r.jsxs)("div",{className:"flex-1 w-full",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-800 text-base lg:text-lg mb-1",children:s.problemTitle}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[et(s.date)," • ",el(s.sessionPeriod)," ",er(s.timeSlot)]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[s.teacherName," 선생님 • ",s.limitMinutes,"분"]})]}),(0,r.jsx)("span",{className:"px-3 py-1 rounded-lg text-xs font-medium mt-2 lg:mt-0 lg:ml-3 ".concat("completed"===s.status?"bg-green-100 text-green-800":"feedback_pending"===s.status?"bg-blue-100 text-blue-800":"bg-amber-100 text-amber-800"),children:"completed"===s.status?"완료":"feedback_pending"===s.status?"피드백 대기":"진행중"})]}),(0,r.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center text-xs",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mr-2 ".concat(s.hasScore?"bg-green-500":"bg-gray-300")}),(0,r.jsxs)("span",{className:s.hasScore?"text-green-700":"text-gray-500",children:["채점 ",s.hasScore?"완료":"대기중"]}),s.hasScore&&null!==s.finalScore&&(0,r.jsxs)("span",{className:"ml-2 font-medium text-green-700",children:["(",s.finalScore,"점)"]})]}),(0,r.jsxs)("div",{className:"flex items-center text-xs",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mr-2 ".concat(s.hasFeedback?"bg-green-500":"bg-gray-300")}),(0,r.jsxs)("span",{className:s.hasFeedback?"text-green-700":"text-gray-500",children:["피드백 ",s.hasFeedback?"완료":"대기중"]})]}),(0,r.jsxs)("div",{className:"flex items-center text-xs",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mr-2 ".concat(s.hasReflection?"bg-green-500":"bg-gray-300")}),(0,r.jsxs)("span",{className:s.hasReflection?"text-green-700":"text-gray-500",children:["복기 ",s.hasReflection?"완료":"작성중"]})]})]}),(0,r.jsxs)("button",{onClick:()=>{console.log("피드백 페이지로 이동:","/session/".concat(s.id,"/feedback")),console.log("세션 ID:",s.id),e.push("/session/".concat(s.id,"/feedback"))},className:"w-full py-3 px-4 bg-white border border-gray-300 rounded-xl text-gray-700 font-medium hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 text-sm lg:text-base",children:[(0,r.jsx)("span",{className:"hidden lg:inline",children:"피드백 페이지 보기 →"}),(0,r.jsx)("span",{className:"lg:hidden",children:"피드백 보기 →"})]})]},s.id))})]}),L&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 px-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-3xl p-8 w-full max-w-2xl shadow-2xl animate-slide-up",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"문제 선택"}),(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]}),(0,r.jsx)("div",{className:"max-h-80 overflow-y-auto custom-scrollbar mb-8",children:(0,r.jsx)("div",{className:"space-y-4",children:0===u.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,r.jsx)("p",{className:"text-gray-500 text-lg",children:"사용 가능한 문제가 없습니다"})]}):u.map(e=>(0,r.jsx)("div",{className:"p-5 rounded-2xl border-2 cursor-pointer transition-all duration-200 ".concat(k===e.id?"bg-gradient-to-br from-blue-50 to-blue-50 border-blue-300 shadow-medium scale-[1.02]":"bg-white border-gray-200 hover:border-gray-300 hover:shadow-soft hover:scale-[1.01]"),onClick:()=>C(e.id),children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-medium text-gray-800",children:e.title}),(0,r.jsxs)("div",{className:"flex items-center mt-2 space-x-2",children:[(0,r.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded",children:["제한시간 ",e.limit_minutes,"분"]}),(0,r.jsxs)("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded",children:["사전열람 ",e.preview_lead_time,"분 전"]})]}),(0,r.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[e.creator.name," 선생님 • ",e.creator.class_name]})]}),(0,r.jsx)("input",{type:"radio",name:"problem",checked:k===e.id,onChange:()=>C(e.id),className:"h-4 w-4 text-blue-600"})]})},e.id))})}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{onClick:()=>{D(!1),C(null),M(null)},className:"btn-secondary flex-1 py-3",children:"취소"}),(0,r.jsx)("button",{onClick:U,disabled:!k,className:"flex-1 py-3 px-6 rounded-2xl font-semibold transition-all duration-200 ".concat(k?"bg-blue-600 text-white shadow-medium hover:bg-blue-700 hover:shadow-lg transform hover:-translate-y-0.5":"bg-gray-200 text-gray-500 cursor-not-allowed"),children:"선택하기 ✨"})]})]})}),_&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 px-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-3xl p-8 w-full max-w-md shadow-2xl animate-slide-up",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"PIN 변경"}),(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m0 0a2 2 0 012 2m-2-2a2 2 0 00-2 2m2 2v2a2 2 0 01-2 2m-2-2a2 2 0 01-2-2m2-2a2 2 0 012-2m0 0V5a2 2 0 00-2-2m-4 6V4a1 1 0 011-1h4a1 1 0 011 1v2m-6 0a1 1 0 00-1 1v4a1 1 0 001 1m-1-5h2m5 0h2"})})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"현재 PIN"}),(0,r.jsx)("input",{type:"password",maxLength:4,value:P,onChange:e=>R(e.target.value.replace(/[^0-9]/g,"")),placeholder:"현재 4자리 PIN 입력",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all text-center text-lg font-mono"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"새로운 PIN"}),(0,r.jsx)("input",{type:"password",maxLength:4,value:V,onChange:e=>B(e.target.value.replace(/[^0-9]/g,"")),placeholder:"새로운 4자리 PIN 입력",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all text-center text-lg font-mono"})]}),(0,r.jsx)("div",{className:"text-sm text-gray-500 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:(0,r.jsxs)("p",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-yellow-600 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.876c1.242 0 2.135-1.13 1.73-2.261L13.956 4.016a1.969 1.969 0 00-3.913 0L3.332 16.739C2.927 17.87 3.82 19 5.062 19z"})}),"PIN은 4자리 숫자여야 하며, 동일한 이름+PIN 조합이 없어야 합니다."]})})]}),(0,r.jsxs)("div",{className:"flex space-x-4 mt-8",children:[(0,r.jsx)("button",{onClick:()=>{I(!1),R(""),B("")},className:"btn-secondary flex-1 py-3",disabled:W,children:"취소"}),(0,r.jsx)("button",{onClick:es,disabled:!P||!V||4!==P.length||4!==V.length||W,className:"flex-1 py-3 px-6 rounded-2xl font-semibold transition-all duration-200 ".concat(P&&V&&4===P.length&&4===V.length&&!W?"bg-blue-600 text-white shadow-medium hover:bg-blue-700 hover:shadow-lg transform hover:-translate-y-0.5":"bg-gray-200 text-gray-500 cursor-not-allowed"),children:W?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-gray-400 border-t-white rounded-full animate-spin mr-2"}),"변경 중..."]}):"PIN 변경"})]})]})}),E&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 px-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-3xl p-6 w-full max-w-sm shadow-2xl animate-slide-up",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"날짜 선택"}),(0,r.jsx)("button",{onClick:()=>T(!1),className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsx)("button",{onClick:()=>ei(new Date),className:"p-3 bg-blue-50 border border-blue-200 rounded-xl text-blue-700 font-medium hover:bg-blue-100 transition-colors",children:"오늘"}),(0,r.jsx)("button",{onClick:()=>{let e=new Date;e.setDate(e.getDate()+1),ei(e)},className:"p-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-700 font-medium hover:bg-gray-100 transition-colors",children:"내일"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"주간 이동"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,r.jsx)("button",{onClick:()=>{let e=new Date;e.setDate(e.getDate()-7),ei(e)},className:"p-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-700 font-medium hover:bg-gray-100 transition-colors text-left",children:"지난 주"}),(0,r.jsx)("button",{onClick:()=>ei(new Date),className:"p-3 bg-blue-50 border border-blue-200 rounded-xl text-blue-700 font-medium hover:bg-blue-100 transition-colors text-left",children:"이번 주"}),(0,r.jsx)("button",{onClick:()=>{let e=new Date;e.setDate(e.getDate()+7),ei(e)},className:"p-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-700 font-medium hover:bg-gray-100 transition-colors text-left",children:"다음 주"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"이번 주 날짜"}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-1",children:A(N).map((e,s)=>{let t=J(e)===X(),l=["일","월","화","수","목","금","토"][e.getDay()],a=ed(e).length>0;return(0,r.jsxs)("button",{onClick:()=>ei(e),className:"p-2 rounded-lg text-center text-xs transition-colors ".concat(t?"bg-blue-200 text-blue-800 font-bold":a?"bg-green-50 text-green-700 hover:bg-green-100":"bg-gray-50 text-gray-500 hover:bg-gray-100"),children:[(0,r.jsx)("div",{className:"font-medium",children:l}),(0,r.jsx)("div",{children:e.getDate()}),a&&(0,r.jsx)("div",{className:"w-1 h-1 bg-green-500 rounded-full mx-auto mt-1"})]},s)})})]})]})]})})]})]})}},6413:(e,s,t)=>{Promise.resolve().then(t.bind(t,1492))}},e=>{e.O(0,[2619,2663,8441,1255,7358],()=>e(e.s=6413)),_N_E=e.O()}]);