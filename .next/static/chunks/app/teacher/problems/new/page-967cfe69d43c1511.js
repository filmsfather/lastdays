(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3397],{5075:(e,r,s)=>{Promise.resolve().then(s.bind(s,7610))},7610:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>d});var a=s(5155),t=s(2115),l=s(2663),i=s(2619),n=s.n(i);function d(){let[e,r]=(0,t.useState)({title:"",content:"",preview_lead_time:10,available_date:"",is_public:!1}),[s,i]=(0,t.useState)(!1),[d,c]=(0,t.useState)([]),[o,m]=(0,t.useState)(!1),x=async r=>{r.preventDefault(),i(!0);try{let r={...e,images:d},s=await fetch("/api/teacher/problems",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)}),a=await s.json();a.success?(l.oR.success("문제가 성공적으로 등록되었습니다!"),window.location.href="/dashboard/teacher"):l.oR.error(a.error||"문제 등록에 실패했습니다.")}catch(e){console.error("문제 등록 오류:",e),l.oR.error("문제 등록 중 오류가 발생했습니다.")}finally{i(!1)}},h=async e=>{var r;let s=null==(r=e.target.files)?void 0:r[0];if(s){m(!0);try{let e=new FormData;e.append("file",s),e.append("altText","문제 이미지");let r=await fetch("/api/upload/images",{method:"POST",body:e,credentials:"include"}),a=await r.json();a.success?(c([...d,{url:a.data.url,fileName:a.data.fileName,altText:a.data.altText}]),l.oR.success("이미지가 업로드되었습니다!")):l.oR.error(a.error||"이미지 업로드에 실패했습니다.")}catch(e){console.error("이미지 업로드 오류:",e),l.oR.error("이미지 업로드 중 오류가 발생했습니다.")}finally{m(!1),e.target.value=""}}},u=async e=>{let r=d[e];try{let s=await fetch("/api/upload/images?fileName=".concat(r.fileName),{method:"DELETE",credentials:"include"}),a=await s.json();a.success?(c(d.filter((r,s)=>s!==e)),l.oR.success("이미지가 삭제되었습니다!")):l.oR.error(a.error||"이미지 삭제에 실패했습니다.")}catch(e){console.error("이미지 삭제 오류:",e),l.oR.error("이미지 삭제 중 오류가 발생했습니다.")}},p=s=>{let{name:a,value:t,type:l}=s.target;r({...e,[a]:"checkbox"===l?s.target.checked:"number"===l||"preview_lead_time"===a?parseInt(t)||0:t})};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-100",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,a.jsx)(n(),{href:"/dashboard/teacher",className:"text-blue-600 hover:text-blue-800",children:"← 대시보드"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"새 문제 등록"}),(0,a.jsx)("p",{className:"text-gray-600",children:"학생들에게 제공할 새로운 문제를 등록합니다"})]})})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,a.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"문제 제목 *"}),(0,a.jsx)("input",{type:"text",id:"title",name:"title",value:e.title,onChange:p,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"예: 이차방정식의 해 구하기"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"preview_lead_time",className:"block text-sm font-medium text-gray-700 mb-1",children:"사전열람 시간 *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"number",id:"preview_lead_time",name:"preview_lead_time",value:e.preview_lead_time,onChange:p,required:!0,min:"1",max:"60",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"10"}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"분"})})]}),(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"면접 시작 전 문제를 볼 수 있는 시간 (1~60분)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"available_date",className:"block text-sm font-medium text-gray-700 mb-1",children:"공개 날짜 *"}),(0,a.jsx)("input",{type:"date",id:"available_date",name:"available_date",value:e.available_date,onChange:p,required:!0,min:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"학생들이 문제를 선택할 수 있는 날짜"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"is_public",name:"is_public",checked:e.is_public,onChange:p,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"is_public",className:"ml-2 block text-sm text-gray-900",children:"등록 즉시 활성화"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-1",children:"문제 내용 *"}),(0,a.jsx)("textarea",{id:"content",name:"content",value:e.content,onChange:p,required:!0,rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"문제의 내용을 자세히 작성하세요..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"문제 이미지 (선택사항)"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("input",{type:"file",id:"imageUpload",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:h,className:"hidden"}),(0,a.jsxs)("label",{htmlFor:"imageUpload",className:"px-4 py-2 border border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors flex items-center gap-2 ".concat(o?"opacity-50 cursor-not-allowed":""),children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),o?"업로드 중...":"이미지 추가"]}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"JPEG, PNG, GIF, WebP (최대 5MB)"})]}),d.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map((e,r)=>(0,a.jsxs)("div",{className:"relative border border-gray-200 rounded-lg overflow-hidden",children:[(0,a.jsx)("img",{src:e.url,alt:e.altText,className:"w-full h-48 object-cover"}),(0,a.jsx)("div",{className:"absolute top-2 right-2",children:(0,a.jsx)("button",{type:"button",onClick:()=>u(r),className:"bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",title:"이미지 삭제",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),(0,a.jsx)("div",{className:"p-2 bg-gray-50",children:(0,a.jsx)("p",{className:"text-xs text-gray-600 truncate",children:e.fileName})})]},r))})]})]}),(0,a.jsxs)("div",{className:"flex justify-between pt-6 border-t",children:[(0,a.jsx)(n(),{href:"/dashboard/teacher",className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"취소"}),(0,a.jsx)("button",{type:"submit",disabled:s,className:"px-6 py-3 rounded-lg text-white font-medium transition-colors ".concat(s?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),children:s?"등록 중...":"문제 등록"})]})]})}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"문제 등록 가이드"}),(0,a.jsxs)("div",{className:"text-sm text-blue-700 space-y-1",children:[(0,a.jsx)("p",{children:"• 문제 제목은 간결하고 명확하게 작성하세요"}),(0,a.jsx)("p",{children:"• 사전열람 시간은 면접 시작 전에 학생이 문제를 미리 볼 수 있는 시간입니다"}),(0,a.jsx)("p",{children:"• 공개 날짜는 학생들이 해당 문제를 선택할 수 있는 날짜입니다"}),(0,a.jsx)("p",{children:"• 문제 내용에는 필요한 조건과 요구사항을 명확히 기술하세요"}),(0,a.jsx)("p",{children:"• 이미지는 문제 이해를 돕는 도식, 그래프, 표 등을 첨부할 때 사용하세요"}),(0,a.jsx)("p",{children:"• ‘등록 즉시 활성화’를 체크하면 등록과 동시에 학생들이 선택할 수 있게 됩니다"}),(0,a.jsx)("p",{children:"• 체크하지 않으면 초안 상태로 저장되어 나중에 수동으로 활성화할 수 있습니다"})]})]})]})})}}},e=>{e.O(0,[2619,2663,8441,1255,7358],()=>e(e.s=5075)),_N_E=e.O()}]);